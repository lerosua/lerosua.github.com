
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>阳光烂灿的日子</title>
  <meta name="author" content="lerosua">

  
  <meta name="description" content="一周一记，日子过得挺快的，感觉没写两天就要去查下一个字是啥了。 工作：来吧，继续是吐槽产品经理吗，又是周末加班。说是赶着星期天发布，做移动产品的人全都是饿鬼抬胎，赶紧的。做产品开发的都知道会有个日期close feather的吧，俺移动开发永远没有，下刻发布，这一刻还在加一个feather， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://lerosua.github.io/blog/page/15">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="阳光烂灿的日子" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">阳光烂灿的日子</a></h1>
  
    <h2>--记录所有碎碎念</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:lerosua.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/01/19/%E5%91%A8%E8%AE%B0-%E8%B0%83/">周记 &#8211; 调</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-19T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2013/01/19/%E5%91%A8%E8%AE%B0-%E8%B0%83/#disqus_thread"
             data-disqus-identifier="http://lerosua.github.io/blog/2013/01/19/%E5%91%A8%E8%AE%B0-%E8%B0%83/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>一周一记，日子过得挺快的，感觉没写两天就要去查下一个字是啥了。</p>

<p>工作：来吧，继续是吐槽产品经理吗，又是周末加班。说是赶着星期天发布，做移动产品的人全都是饿鬼抬胎，赶紧的。做产品开发的都知道会有个日期close feather的吧，俺移动开发永远没有，下刻发布，这一刻还在加一个feather，或调一个界面。或者好的产品经理永远是程序员咒骂的对象？anyway，补假给我就好了，我还得继续我的人生，我的人生不是只有工作，即使用来发呆，也是自主的消费，而不是被别人利用的工具。嗯，这是最近学到的自由主义里的一些概念。</p>

<p>学习：是的，最近开始上进了，学习。每晚临睡前在看网易公开课，哈佛大学的《公正：该如何做是好？》。我看简介说的是为法学院学生开的课，但全是哲学道德的问题啊。不过受益非浅啊，前三课生动活泼，引人入胜。其中一段人吃人的公案，让我想起之前TVB的《天与地》应该就是以这个公案为题材的。由浅及深地谈论了功利主义，自由主义，并实际谈论了一些如纳税，征兵，政府组成等问题，引人入胜并发人深醒。开扩了思维境界，现在想起上学时学的什么马哲，简直就是垃圾狗屎。好的思想理应让人产生愉悦感的嘛。不过最近两课开课康德的理性思维，有了哲学素有的催眠作用了，几乎都睁不开眼了。每晚跟康德做斗争真是残酷啊。不过一定要坚持下去。</p>

<p>说起来为啥突然上进了呢，原因是星期天醒来，E家宽断网，然后不得不拿着ipad看书。突然觉得不利用ipad学习真的对不起花掉的三千五块钱。于是打开之前看了一半的PHP教程继续看下去。然后PHP也大概熟悉了语法结构，相信再多看看源码，掌握它不是问题。然后就立下了每晚用ipad学习的目标。</p>

<p>折腾：开源推特有了突破性进展，把导入Twitter时间线的插件摸索出来了，并以此写了一篇<a href="http://leros.linuxapp.org/?p=1371">博文</a>。搞这些也算是一些自我满足。</p>

<p>视频：在地铁上的时间也发呆够了，于是再次找了港剧来看。《天涯侠医》，我一直以为这剧是ATV拍的。讲述远赴非洲做义工的医生的故事，神秘的非洲草原，真正的白医天使，感觉挺吸引人的。</p>

<p>时事：广州这也发生讨薪爆炸案了，普通百姓生活越来越艰辛啊。正如今天所想，月薪百万的日子不远了吧，通货膨胀会帮你的。</p>

<p>运程：☆</p>

<p>期待：再三请求，补我假吧&#8230; </p>

<p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/01/17/%E4%B8%AA%E4%BA%BA%E5%BE%AE%E5%8D%9Astatusnet%E6%8A%98%E8%85%BE%E5%B0%8F%E8%AE%B0/">个人微博statusnet折腾小记</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-17T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2013/01/17/%E4%B8%AA%E4%BA%BA%E5%BE%AE%E5%8D%9Astatusnet%E6%8A%98%E8%85%BE%E5%B0%8F%E8%AE%B0/#disqus_thread"
             data-disqus-identifier="http://lerosua.github.io/blog/2013/01/17/%E4%B8%AA%E4%BA%BA%E5%BE%AE%E5%8D%9Astatusnet%E6%8A%98%E8%85%BE%E5%B0%8F%E8%AE%B0/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在两三年前还有大把人折腾独立博客，而如今移动互联网大潮之下却没啥人折腾独立微博了，沟通的紧密性，赢者通吃，业界趋于垄断，自由的精神为之远去，Aaron Swartz绝望到要自杀。</p>

<p>前言说完，叫微博也好，叫推特也好，这类短信息服务的确要多人才玩得转，不多说，statusnet是为数不多比较好用的开源服务，但它的文档其实太少了，起码中文的没多少。但由statusnet支持起来的站点还是挺多的，比如 http://identi.ca</p>

<p>准备条件：statusnet的环境要求，VPS一枚，域名一枚，数据库一枚，我搭建的环境是nginx+mysql+php5。php要有Curl,XMLWriter,GD,mbstring等模块。</p>

<p>首先去status.net官网下载稳定版本 http://status.net/download </p>

<p>然后解压到服务器目录下，一般为 /var/www/statusnet 目录。之后打开目录下的INSTALL文件，上面有安装指南，照着做吧。</p>

<p>重点在于生成数据库，把域名指向/vaar/www/statusnet目录。之后便可以在浏览器中http://yourserver.example.com/statusnet/install.php页面进行设置。</p>

<p>在statusnet目录下的config.php起码像是下面的内容，
<pre lang="C">
$config['site']['name'] = '域名';</pre></p>

<p>$config[&#8216;site&#8217;][&#8216;server&#8217;] = &#8216;域名&#8217;;<br />
$config[&#8216;site&#8217;][&#8216;path&#8217;] = false; <br />
$config[&#8216;site&#8217;][&#8216;fancy&#8217;] = true;<br />
$config[&#8216;site&#8217;][&#8216;theme&#8217;]=&#8217;micromic&#8217;;<br />
$config[&#8216;site&#8217;][&#8216;language&#8217;]=&#8217;zh_CN&#8217;;<br />
//$config[&#8216;site&#8217;][&#8216;logfile&#8217;]=&#8217;/tmp/statusnet.log&#8217;;<br />
$config[&#8216;db&#8217;][&#8216;database&#8217;] = &#8216;mysqli://数据库用户名:密码@127.0.0.1/数据库名&#8217;;<br />
$config[&#8216;db&#8217;][&#8216;type&#8217;] = &#8216;mysql&#8217;;<br />
$config[&#8216;site&#8217;][&#8216;profile&#8217;] = &#8216;public&#8217;;
</p>

<p>基本上完成以上操作，statusnet就可以正常跑起来了。</p>

<p><strong>打开SSL连接</strong>：<br />
嗯，来点高级货吧，去startssl.com申请个证书吧，方法请自行Google。给域名申请好证书并在nginx设置完后，理论上直接去statusnet的后台设置ssl连接为alway即可。但起码用着 statusnet 1.1.0版本有个不明显的bug，即如果要它打开ssl，则会检测一个$HTTPS的变量，用户如果没有设置，则登录那里会导致死循环，我就吃了两次亏，最后靠一个专家来帮我排除掉这个问题。<br />
好吧，列一下nginx里的一个设置
<pre lang="C">
server {</pre></p>

<p>        listen   443; ## listen for ipv4<br />
    ssl on;</p>

<p>//startssl申请回来的证书和密钥<br />
    ssl_certificate  /var/www/statusnet/ssl.crt;<br />
    ssl_certificate_key  /var/www/statusnet/ssl.key;</p>

<p>        server_name  域名;<br />
        access_log  /var/log/nginx/t_linuxapp.access.log;<br />
    root   /var/www/statusnet;<br />
    index index.php;<br />
    location ~ &#46;php$ {<br />
            fastcgi_pass  127.0.0.1:9000;<br />
            fastcgi_index index.php;<br />
            fastcgi_param SCRIPT_FILENAME $document_root/$fastcgi_script_name;<br />
            fastcgi_param  HTTPS    on; //这个变量很重要啊<br />
            include fastcgi_params;<br />
    }<br />
    location / {<br />
            try_files $uri $uri/ @laconica;<br />
    }<br />
    location @laconica {<br />
            rewrite ^(.+)$ /index.php?p=$1 last;<br />
    }</p>

<p>}
</p>

<p>一点提醒，证书折腾最好一开始就做，我是后来才折腾，装好证书后发现浏览器的证书锁提示有警告，站里有http的连接，因为一开始保存的一些数据是直接http的，之后它们就进数据库了。如果要转换，得进数据库操作了，还好那天专家有空，帮我搞定了，绿色的锁，安全认证。</p>

<p><strong>开启TwitterBridge插件</strong>
毕竟是个人微薄，一个人玩肯定无聊，因此肯定是想分享到别的网站上的，所以这个插件就是用来跟Twitter交互的。但因为Twitter全站SSL了，开启这个插件就要求PHP的SSL支持了，并且Curl也要有SSL支持。为了这两项，我可编译了PHP源码几次啊。</p>

<p>下面的工作请自备梯子。<br />
准备功夫，去developer.twitter.com申请一个应用程序吧。取得相应consumer_key和consumer_secret,在config.php里添加如下内容:
<pre lang="C">
$config['site']['ssl'] = 'alway'; //上面打开ssl时添加，但其实没用，在设置面板设置的时候，选项是写进数据库表的</pre></p>

<p>addPlugin(&#8216;TwitterBridge&#8217;,<br />
    array(<br />
        &#8216;consumer_key&#8217; => &#8216;EgASKsNxxxxxxxxxxx&#8217;,<br />
        &#8216;consumer_secret&#8217; => &#8216;xTHILfYW4b43kTMQxxxxxxxxxxxxxxxxxxxxx</p>

<p>    )<br />
);
</p>

<p>如此在设置面板就有相应Twitter的选项，在自己用户的设置里点击Twitter，然后连接账号，跳转到授权那，理论上能把statusnet发的信息同步到Twitter上了。</p>

<p>之所以是理论是因为还有重要的一步没做，启动后台进程。在scripts目录下有个startdaemons.sh脚本，它会帮你启动一个叫queuedaemon.php的脚本程序。有了它才能帮你同步信息到Twitter上。理论上各个站点的statusnet开启了OStatus插件的话，是可以互相follow的。目前我只和http://identi.ca/做过一些实验，却只有明确 @用户 的信息才能同步过来。即我自己站点follow了identi.ca的一个用户，平时并不能收到他的信息流，如果他明确@你，则能收到。怀疑identi.ca限制了一些东西。</p>

<p><strong>同步Twitter信息流</strong>
好吧，上面这个功能是最期待的，我一直以为还未开发出来，因为在identi.ca里找了半天也没这个选项。最后还是在TwitterBridge的README里找到了英文描述。#不读README而盲目去网上搜索的人伤不起啊<br />
在这里，我明确地说，1.1.0的statusnet是支持把Twitter上好友的信息流同步回来的。那么，这个就相当于翻墙Twitter外挂了啊。嗯，因此前面折腾SSL是必要的。不然同步一下子就被防火墙干掉你的域名.</p>

<p>前面已经设置好TwitterBridge的话，只需要在config.php再添加
<pre lang="C">
$config['twitterimport']['enabled']=true;
$config['admin']['panels'][] = 'twitter';
</pre>
那么，在用户的设置面板的Twitter选项则会多出一个 “导入我好友的时间线” 的设置，把它选上吧。最后，去到 /var/www/statusnet/plugins/TwitterBridge/daemons目录，手工开启同步脚本
<pre lang="C">
php twitterstatusfetcher.php
</pre>
理论上这个脚本应该会被前面的startdaemons.sh脚本所带起来，但我的站点并没有，因此只能手工开启。</p>

<p>PS.以上操作可能遇到一些php脚本错误问题，请自行搜索解决,这不是教程，只是备注.切记!</p>

<p>statusnet的API路径一般为 https://你的域名/API/ , Android下可用seesmic来连接</p>

<p>最后无图无真相:
<a href="http://leros.linuxapp.org/?attachment_id=1372" rel="attachment wp-att-1372"><img src="http://leros.linuxapp.org/wp-content/uploads/2013/01/QQ20130117-6-300x210.png" alt="QQ20130117-6" width="300" height="210" class="aligncenter size-medium wp-image-1372" /></a>
</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/01/12/%E5%91%A8%E8%AE%B0-%E5%90%95/">周记 &#8211; 吕</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-12T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2013/01/12/%E5%91%A8%E8%AE%B0-%E5%90%95/#disqus_thread"
             data-disqus-identifier="http://lerosua.github.io/blog/2013/01/12/%E5%91%A8%E8%AE%B0-%E5%90%95/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>工作：连续八天工作日。最气愤的是周五被告知周六加班。尼玛正如我所说的，加班应该用在处理紧急事务上，而不是因为元旦放假太多的缘故。结果星期五星期六效率低下，无故浪费时间，增加员工怒气。原先定好的发布周期有如放屁，突然想到个东西又马上加上去，把原先的设计更改掉。尼玛设计不是不能改，但不能想一出是一出啊，定好的周期不遵守，定来干嘛。何况移动开发迭代迅速，你想好的更改放到下一版本不就得了。有些设计去掉又重新捡起来，纯粹就为折腾开发人员。这些算是工作量就不好说什么，反感的是不遵守自己制定的开发周期，说好这周结束功能性开发准备测试发布，结果临时加个东西改个设计，漫无时间观念则导致士气全无。真TM受不了。</p>

<p>时事：南周这个事情没啥好说的，本来就没有独立的媒体。但是他们抗争一下也是好的，上街支持的人也是勇敢的。有条件还是移民的，呆下去都是等死的，希望是渺茫的，人生是虚无的，我是找茬的。</p>

<p>折腾：这星期倒是挺多东西折腾，一天一个花样，心思太乱了。比如星期一在构思小说。周二折腾菜博士的三网联合机器人，编译boost需要相当内存，vps吃紧得很啊。星期三跑去申请ssl的证书了，搞了一晚上，发现实在地写上合法的地址，就能通过，还是老外厚道。虽然只有一年免费。星期三则开始给开源推特折腾全站开ssl连接，遇到一些问题，最后是@jyf1987帮忙调试成功，并成功转换了数据库，劳苦功高。并且在折腾过程中习得了mosh这工具，也见识了tumx神器的共享操作技能，大张眼界。</p>

<p>心情：很郁闷，还是加班那事闹的，或许那只是导火线，一来学车这事一拖再拖，现在2013年又搞新考法，二来身在天朝无时不郁闷中。刚看一新闻，一26岁黑客Aaron Swartz自杀身亡，14岁开始贡献代码，天妒英才啊，有啥事想不开呢，兄弟要是来中国逛逛也许就想开了。</p>

<p>运程：☆</p>

<p>期待：所有不美好的事情都会成为过去，忘记所有重新开始，但那只能在没有仇恨的环境下，人生没有重置，放不开，所有耻辱带着回忆，勇敢地去接受他，面对颤抖的心，也许有一天，终于不用再害怕，也就得到了解脱。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/01/08/%E4%B8%89%E7%BD%91%E8%9E%8D%E5%90%88%EF%BC%9A%E6%B2%9F%E9%80%9A%E6%97%A0%E6%9E%81%E9%99%90/">三网融合：沟通无极限</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-08T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2013/01/08/%E4%B8%89%E7%BD%91%E8%9E%8D%E5%90%88%EF%BC%9A%E6%B2%9F%E9%80%9A%E6%97%A0%E6%9E%81%E9%99%90/#disqus_thread"
             data-disqus-identifier="http://lerosua.github.io/blog/2013/01/08/%E4%B8%89%E7%BD%91%E8%9E%8D%E5%90%88%EF%BC%9A%E6%B2%9F%E9%80%9A%E6%97%A0%E6%9E%81%E9%99%90/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>标题党而已。这里说的三网指的是xmpp/gtalk, IRC,QQ群。它们各自有自己聊天范围，然而如今有机会打破彊界，汇总在一起，只用gtalk的人也有机会跟只用QQ的人聊天，只挂IRC的人也有可以认识更多的人。这才是互联网的真谛嘛。</p>

<p>废话不多说，把XMPP聊天室，IRC会议室，QQ群串在一起的靠的是一个转发机器人。</p>

<p>microcai搞了个项目 https://github.com/microcai/qqbot ， 利用gloox库搞定xmpp，libwebqq库搞定QQ群，libirc库搞定IRC会议室，把不可能串成了可能。</p>

<p>配置：</p>

<p>编译基本需要gloox和boost库。boost极吃内存,没有300M过不了&#8230;</p>

<p>其余也就cmake 和make命令了。</p>

<p>microcai写死了配置文件位置，要么是 /etc/qqbotrc 要么是 ~/.qqbotrc</p>

<p>这里给一份配置示例：
<pre lang="C">qqnum=253920xxxx
qqpwd=密码</pre></p>

<p>ircnick=linuxcn<br />
ircpwd=密码<br />
ircrooms=linuxcn<br />
xmppuser=imbot@linuxapp.org <br />
xmpppwd=密码 <br />
xmpprooms=linuxcn@im.linuxapp.org <br />
logdir=/tmp/ <br />
map=qq:235609603,irc:linuxcn,xmpp:linuxcn
</p>

<p>irc默认连freenode.net服务器。xmpproms是xmpp会议室地址。map那个qq对应的就是qq群。<br />
设置好后，直接运行 ./qqbot即可。</p>

<p>演示：<br />
目前有两个demo在运行中，第一是microcai他们搞的<br />
xmpp聊天室是 avplayer@im.linuxapp.org<br />
IRC房间是 #avplayer<br />
QQ群号是 3597082<br />
随便加入一个即可。如果加入多个，则信息就会冗余了。</p>

<p>另一个demo地址:<br />
xmpp聊天室是 linuxcn@im.linuxapp.org<br />
IRC房间是 #linuxcn<br />
QQ群号是 235609603</p>

<p>欢迎来玩大杂烩。</p>

<p>PS. 关于QQ那边有点东西要补充：qq用的是webqq协议。如果在国外服务器上跑，会要求输入验证码。解决的方案是先用vps的ip作代理登录webqq页面，反复几次，让webqq记住vps的ip，设为白名单。之后不再出现验证码后，即可使用这个机器人登录qq了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/01/05/%E5%91%A8%E8%AE%B0-%E5%BE%8B/">周记 &#8211; 律</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-01-05T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2013/01/05/%E5%91%A8%E8%AE%B0-%E5%BE%8B/#disqus_thread"
             data-disqus-identifier="http://lerosua.github.io/blog/2013/01/05/%E5%91%A8%E8%AE%B0-%E5%BE%8B/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>2013年第一篇周记。</p>

<p>工作：也就今天开工。不过之前两天在家里也调试了一下，主要关注滤镜的内存问题。由于相片过于巨大，滤起来极吃内存，把相片转成1600大小再滤，压力顿时小了许多。再调试调试估计问题也不大。然后添加了U付的接口，让用户可以用信用卡付款。没啥难度，主要是集成了对方提供的插件。</p>

<p>时事：讨论闯黄灯问题，我还没车，不理。讨论新政，有个屁政。vpn被封，目前还有goagent顶住。理想很丰满，现实很骨感。</p>

<p>视频：放假有两天时间用来看电视剧了，又是旧剧《水浒无间道》。主要看帅哥美女，大仙与爱美神。</p>

<p>学习：放假本来有计划学一下PHP的。结果只看完了HTML和CSS的章节，虽然只开了个头，但也算解了以往对HTML和CSS上的一些不清不楚的地方。</p>

<p>放假：假期六天，中间有三天回老家，逛了一下午家俱店，最后更换了家里的电视柜和茶機。不过也没说服爸妈换掉那台26寸的CRT型大电视，之前它坏过一段时间，爸妈说不要它后，又自动好了。然后就一直不肯换了，又如用了十几年的热水器，老说又好用烧的水又热。老人家就是比较迷信旧的事物，没办法。这现实不给力也是原因之一吧。</p>

<p>其它：一直在构思着要写点什么，下载了一个写小说的软件，就由收集片断开始吧，希望能持续。</p>

<p>运程：★</p>

<p>期待：接下来六天工作日，工作顺利的话，应该不错。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/12/29/%E5%91%A8%E8%AE%B0-%E5%B2%81/">周记 &#8211; 岁</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-29T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2012/12/29/%E5%91%A8%E8%AE%B0-%E5%B2%81/#disqus_thread"
             data-disqus-identifier="http://lerosua.github.io/blog/2012/12/29/%E5%91%A8%E8%AE%B0-%E5%B2%81/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>应该是2012年最后一篇周记了。也是第36篇，岁字篇。字意又涨一岁啊。</p>

<p>工作：融合滤镜功能，功能调得差不多，但仍纠结于内存问题，其它app用于分享图片，都限制图片大小在640x640之中，因为滤镜调整这些图片轻车熟路，而我们app需要打印出来，基本上都是在原图大小基础上调整，一张2M的图片，却需要分配达30M的内存用于滤镜处理，恐怖之极。尝试了用ARC去编译，不过仍有些问题未解决。明年回来第一周必须要发布，又是赶活儿。</p>

<p>时事：人大通过了一个什么实名制的管理网络的法，顿时哀鸿遍野，有种末日来临的感觉。越封闭的制度对抗越开放的潮流，天朝人民毕竟不是朝鲜人了，尝试过自由的气味，会甘心再回到那个黑暗的时期吗，将会有怎样的变化视目以待。但当所有网络都被监管，2013无疑是盛世的来临，起码官方在表面上会自我感觉良好，而官面上越好看，底层将越黑暗。未来更加阴晴不定了。</p>

<p>电影：看了《寒战》，觉得有新意的地方在于高层内斗，并且展现一些高层决策机制，以往港片都比较少触及。而其中一些法制宣传的口号略显主旋律，但放在缺之少之的天朝，还是有必要展现的。然后又看了《一路向西》，果然是三级片中的文艺片。露得好看，吐槽天朝一些现象又有共鸣，最后恶搞背影一段又有新意。然后王静耍酷也很有特色，一副玩世不恭又很搞笑的样子。</p>

<p>运程：★</p>

<p>期待：接下来是六天假期，希望能干点事儿。</p>

<p>&nbsp;</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/12/25/%E6%88%91%E5%B0%B1%E7%88%B1%E8%A3%85%E9%80%BC%E7%B3%BB%E5%88%97%E4%B8%80/">我就爱装逼系列一</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-25T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2012/12/25/%E6%88%91%E5%B0%B1%E7%88%B1%E8%A3%85%E9%80%BC%E7%B3%BB%E5%88%97%E4%B8%80/#disqus_thread"
             data-disqus-identifier="http://lerosua.github.io/blog/2012/12/25/%E6%88%91%E5%B0%B1%E7%88%B1%E8%A3%85%E9%80%BC%E7%B3%BB%E5%88%97%E4%B8%80/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>一心二用</p>

<p><a href="http://leros.linuxapp.org/?attachment_id=1355" rel="attachment wp-att-1355"><img class="aligncenter size-medium wp-image-1355" alt="two" src="http://leros.linuxapp.org/wp-content/uploads/2012/12/two-300x225.jpg" width="300" height="225" /></a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/12/22/%E5%91%A8%E8%AE%B0-%E6%88%90/">周记 &#8211; 成</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-22T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2012/12/22/%E5%91%A8%E8%AE%B0-%E6%88%90/#disqus_thread"
             data-disqus-identifier="http://lerosua.github.io/blog/2012/12/22/%E5%91%A8%E8%AE%B0-%E6%88%90/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>工作：这周终于感在审核团队圣诞放假前出来了个v1.1.1版本，修正关于日历与年历的bug。然后工作内容是加滤镜。正如我所吐槽的，凡是跟照片沾点边的app都想整套滤镜。个个都想大而全，拍照的有滤镜，分享的有滤镜，现在打印的也要有滤镜。估计一部iphone手机里起码有五套一样的滤镜代码。浪费用户空间，浪费网络流量。但是，还是得做&#8230;</p>

<p>网络：这周最大得益还是在折腾VPS上，终于体会到玩服务器的一点乐趣。首先是博客搬到了这个独立VPS上，这个主要功劳还是shan的帮忙。也因此有了一个二级域名: leros.linuxapp.org ，之后一级域名虽然被墙，但还是让它指向回这里吧。</p>

<p>二来是终于建立了jabber服务器，前面一篇文章记录了过程。有了自己的jabber服务器，建立了稳定的聊天室，终于我们几个网友有了固定的场所吹水。这一直是过去几年想做的事情。</p>

<p>三来竟然建立了一个statusnet服务，也就是开放的微博,推特。虽然只有自己一个人玩，但这兴奋也犹如当年建立独立博客一般。不过现在再也没有兴起当年建立独立博客一般的热潮。不是去twitter，就是去微博，或者G+，Facebook，全是私有网络，网络逐渐走向封闭的趋势。或许Stallman应该意识到，自由软件运动要扩展开来，下一波应该是要发展自由服务了。不过statusnet也不是太好用，虽然ostaus协议可以跨网关注，但似乎并不能实时获取到跨网用户的信息，或者我这还没配置好，期待进一步研究。说了半天，这个服务地址还是得说一下：t.linuxapp.org ， 具体叫什么名字也没想好，或许会推广，或许一直是自己在玩。</p>

<p>由于折腾上面的东西，接触到了平时没用过的php，nginx,mysql等，多少学习到一些益处。</p>

<p>时事：时事的话估计也就一个世界末日这话题了。事实证明，21号没有末日，但这话题却一直被商家用来炒作，大肆消费。说到底还是眼球经济。上次谈及世界末日已经是1999年的时候，我们这一代人，估计还会遇到几次。或许正如段子所言，把钱光花了，那才是世界末日。</p>

<p>电影：老犁介绍了一部《高度怀疑》给我看。看了四分之一，男主决定要干的那件事之后，我大约已经猜到剧情走向了。基本上男方的设想不可能顺利实现，反派要捣蛋，女主上场，帮忙搞定。又如写小说的定律一般，如果前面出现了枪，那它必然会发射。电影中出现了凶杀案，必然要有一个凶手。这里设定成男主，必然是再一次逆转。基本上剧本总体说得过去，我猜得到也是因为看了太多这类电影，明白它必然会逆转，这剧情下二次逆转也很正常。但这个片还是弱了点，反派被搞定的过程太快，后面的剧情赶进度一般，似乎为了逆转而逆转。</p>

<p>运程：★★</p>

<p>其它：梓潼转了份工，现在成为一名光荣的社工了。</p>

<p>期待：既然世界末日没来，日子还得继续过，地球还是继续转，期待2050。</p>

<p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/12/17/ejabberd-for-build/">Xmpp服务器ejabberd建设小记</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-17T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2012/12/17/ejabberd-for-build/#disqus_thread"
             data-disqus-identifier="http://lerosua.github.io/blog/2012/12/17/ejabberd-for-build/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>本来想写指南，但发现其实自己也不着北，只能将建立过程稍微说一遍，以资记忆，不敢充指南解惑之责。</p>

<p>前言：<br />
xmpp是个好东西啊，以前也稍微有些研究，并且写过一些客户端。但服务器方面都没怎么折腾过。许多大公司都用它，然后却用之不宣，像Google的google talk，像Apple用的推送服务，都是基于xmpp。而我之前也一直想推广xmpp的聊天室服务，一来不想让之受限于QQ群这样受监控的组，二来想到xmpp的聊天室毕竟IRC多了一对一聊天服务。不过免费的xmpp服务器一向难找，国外出名的jabber.org,jaim.at，之前也一样用他们的服务器的聊天室，但这两服务器实在不争气，三天两头出毛病。于是一早就想建立自己的服务器，聊天室。直到最近可以折腾VPS，今天终于成功了。</p>

<p>环境：VPS, Debian GNU/Linux 6.0<br />
1. 安装erlang环境
<pre lang="C">
sudo apt-get install erlang
</pre></p>

<p>2. 安装ejabberd
<pre lang="C">
sudo apt-get install ejabberd
</pre></p>

<p>运气好的话，到这步已经完成。然后我运气不太好。于是曲线救国，去ejabberd官网下载二进制包安装。</p>

<p>2a. 安装ejabberd from官网<br />
地址：http://www.process-one.net/en/ejabberd/downloads<br />
选择2.1.11版本。<br />
最后会得到一个ejabberd-2.1.11-linux-x86-installer.run.gz 压缩包
<pre lang="C">
gunzip ejabberd-2.1.11-linux-x86-installer.run.gz
chmod +x ejabberd-2.1.11-linux-x86-installer.run
sudo ./ejabberd-2.1.11-linux-x86-installer.run
</pre>
依次是解压，给予执行权限，然后以超级用户模式运行它。这二进制就开始自解压，并且会问你问题。一开始是展示授权信息，这回当然是一路回车。<br />
问你安装路径，默认是/opt，这个也不要改了。<br />
然后会问你域名设置，<br />
填 linuxapp.org (这是我用的，自己准备好域名）</p>

<p>再问你管理账号，默认是admin<br />
这个随便改不改，一般别改吧。省得自己忘了。<br />
之后便是设置密码。<br />
然后就没有然后了。</p>

<p>查看ps ax，会发现两个进程
<pre lang="C">
11624 ?        S      0:00 /opt/ejabberd-2.1.11/bin/epmd -daemon
11626 ?        S      0:03 /opt/ejabberd-2.1.11/bin/beam -K true -P 250000 -- -root /opt/ejabberd-2.1.11 -progname /opt/ejabberd-2.1.11/bin/erl -- -home /root -- -sname ejabberd@localhost -smp auto -noshell -noinput -noshell -noinput -mnesia dir "/opt/ejabberd-2.1.11/database/ejabberd@localhost" -s ejabberd -ejabberd config "/opt/ejabberd-2.1.11/conf/ejabberd.cfg" log_path "/opt/ejabberd-2.1.11/logs/ejabberd.log" -sasl sasl_error_logger {file,"/opt/ejabberd-2.1.11/logs/erlang.log"}
</pre>
即是ejabberd已经起来了。</p>

<p>验证是否起来，直接去浏览器查看 http://linuxapp.org:5280/admin （当然这里的linuxapp.org要换成之前你设置的域名），会要求用户名和密码，即是你之前设置的。</p>

<p>来说说聊天室配置吧：<br />
配置文件在/opt/ejabberd-2.1.11/conf/ejabberd.cfg
<pre lang="C">
  {mod_muc,      [
		  {host, "conference.@HOST@"},
		  {access, muc},
		  {access_create, muc_create},
		  {access_persistent, muc_create},
		  {access_admin, muc_admin}
		 ]},
</pre>
找到这么一段，这里已经启动了muc。但国外的服务器都把域名设置得这么长十分不爽，于是改成：
<pre lang="C">
  {mod_muc,      [
		  {host, "im.@HOST@"},
		  {access, muc},
		  {access_create, muc_create},
		  {access_persistent, muc_create},
		  {access_admin, muc_admin}
		 ]},
</pre>
然后添加 im.linuxapp.org域名，等之生效后重启服务器。</p>

<p>打个psi，用上面设置的admin账号登录，在我这里即是 admin@linuxapp.org，然后创建聊天室 linuxcn@im.linuxapp.org，之后配置聊天室为永久。</p>

<p>好了，我在上面等你。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/12/15/%E5%91%A8%E8%AE%B0-%E4%BD%99/">周记 &#8211; 余</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-12-15T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2012/12/15/%E5%91%A8%E8%AE%B0-%E4%BD%99/#disqus_thread"
             data-disqus-identifier="http://lerosua.github.io/blog/2012/12/15/%E5%91%A8%E8%AE%B0-%E4%BD%99/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>工作：v1.1发布了，结果连续两天发现要命的bug，于是连续两天发修复版本。怪乎开发者不太细心，也怪乎测试者不留心。其实还是缺少专业测试啊。这周是一边修bug一边开发新功能，时间仍然过得飞快。不知不觉中。然后见识了iphone5，拿着在手中确实轻了许多，没有了质感，摸摸用料，看着略微有点山寨的感觉。真心难以第一眼看上他。</p>

<p>社交网络：还在几个月前，我是五分钟不刷twitter就不行的那种。但最近这些天似乎已经戒了这习惯。半天也没刷它也不当回事了。估计还是因为自从api沦陷，手机无法自在刷推，于是不再热衷了吧。</p>

<p>视频：这星期没看啥电影。其余则继续追看《大太监》，其中有姚双喜被逼迫然后出卖兄弟的桥段，后面李莲英竟然又原谅他了，虽有逼迫之事，但出卖就是出卖，人命一条，安德海死得也忒冤了。这种兄弟不要也罢。</p>

<p>电脑：周五回家的时候太匆忙，结果忘记把mbp的电源线背回来了。于是祭出尘封已久的神舟。顺便把Qomo给修复一下（之前升级之后，主题和扩展什么的都丢失了）。经过一晚上折腾兼有免费客服指导，终于把界面稍微调顺一点。但gnome-shell 3.6的一些改动也不得不让人吐槽。尤其是active模式的搜索框的网络搜索接口去掉为甚，简直是越改越落后了。不怪乎周五推上一致在讨论Linux转向Mac的问题。偶吐槽了一句，男人有钱就变坏，Linuxer有钱就转苹果，有甚多人回应。但其实偶也转向苹果了。</p>

<p>时事：切糕话题不知是上星期开始的吧。但每当我路过街边，看着少数民族在卖切糕，或烤肉串，或葡萄干，看着他们迷惘的眼神和风尘扑扑的面孔，都在想他们怎么谋生啊，卖这些能赚得多吗，这天朝已是大汉族天下，生在天朝已是不易，更不易的是生在天朝却身为少数民族。他们粗通汉语，沟通不足，无法获取更高的就业途径，身份被歧视，信仰被践踏，却告天不应，呼地不灵。某党做的孽，却要整个民族来买单。何曾有过公平，公正，公理。思极至此，总不免暗自灰心。</p>

<p>运程：★</p>

<p>期待：下星期MX2发布，希望有同步flyeme2.0给MX，期待它的开Root操作。</p>

<p></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/16/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/14/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/03/22/zhou-ji-mo/">周记 &#8211; 万</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/15/zhou-ji-mo/">周记 &#8211; 万</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/08/zhou-ji-ji/">周记 &#8211; 及</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/01/zhou-ji-lai/">周记 &#8211; 赖</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/02/23/zhou-ji-mu/">周记 &#8211; 木</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - lerosua -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'lerosua';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
