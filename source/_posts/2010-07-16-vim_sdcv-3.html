---
layout: post
title: vim技巧之取词翻译III
categories:
- 程序技巧
tags:
- sdcv
- vim
published: true
comments: true
---
<p>以前写过vim里用sdcv取词的<a href="http://leros.linuxapp.org/2006/12/vim_sdcv-2/">一系列文章</a>。</p>

<p>按一个快捷键能调出窗口来显示sdcv的翻译结果，但它不能方便地调用关闭。也就是用同一个快捷键开关窗口。如今此vim脚本有了进化，加了如此功能。</p>

<p>全部脚本如下：
<pre lang="bash">
let s:w_mywin=0</pre></p>

<p>function! Mydict()<br />
	if s:w_mywin<br />
		let s:w_mywin=0<br />
		set nu!<br />
		close<br />
		file<br />
		return<br />
	endif<br />
	let s:w_mywin=1<br />
	let expl=system('sdcv -n ' .<br />
				\  expand("<cword>"))<br />
	windo if<br />
				\ expand("%")=="diCt.css" |<br />
				\ q!|endif<br />
	botright vertical 25split diCt.css<br />
	setlocal buftype=nofile bufhidden=hide noswapfile<br />
	set nu!<br />
	1s/^/\=expl/<br />
	1<br />
endfunction<br />
nmap <silent> <f2> :call Mydict()<cr>

将之保存为sdcv.vim,放到~/.vim/plugin即可。<br />
详细信息参考:
<a href="http://leros.linuxapp.org/2006/12/vim_sdcv-2/">vim技巧之取词翻译II</a>
<a href="http://leros.linuxapp.org/2006/09/vim_sdcv/">VIM技巧：VIM里快速翻译单词</a>
</cr></f2></silent></cword></p>
